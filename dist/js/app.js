$(document).ready(function(){window.onkeydown=function(e){if(9==e.keyCode)return!1},window.onkeypress=function(e){if(9==e.keyCode)return!1},$(".faq-item").click(function(){$(this).toggleClass("active"),$(this).find(".more").slideToggle()});var e=0;$("input").hasClass("required-input")&&($(".required-input").mask("9"),$(".number-inputs").each(function(){$($(this).find(".required-input")).attr("disabled","disabled"),$($(this).find(".required-input")).attr("maxlength","1"),$(this).find(".required-input").hasClass("blocked")||$($(this).find(".required-input").first()).removeAttr("disabled")}),$(".required-input").on("keyup",function(t){var i=$(this).parent().find(".required-input").length;8==t.keyCode&&($(this).prev("input").focus(),e=i-1),$(this).val().match(/^\d{1}$/)&&$(this).val().length>=1&&($(this).next("input").removeAttr("disabled").focus(),e++),console.log("countThisInput",e)})),$("select").each(function(){var e=$(this),t=$(this).children("option").length;e.addClass("select-hidden"),e.wrap('<div class="select"></div>'),e.after('<div class="select-styled"></div>');var i=e.next("div.select-styled");e.children("option[selected]")&&(i.text(e.children("option[selected]").text()),""!=i.text()&&i.addClass("select-item"));for(var s=$("<ul />",{"class":"select-options"}).insertAfter(i),a=0;a<t;a++)$("<li />",{text:e.children("option").eq(a).text(),rel:e.children("option").eq(a).val()}).appendTo(s);var n=s.children("li");i.click(function(e){e.stopPropagation(),$("div.select-styled.active").not(this).each(function(){$(this).removeClass("active").next("ul.select-options").slideUp()}),$(this).toggleClass("active").next("ul.select-options").slideToggle()}),n.click(function(t){t.stopPropagation(),i.text($(this).text()).removeClass("active").addClass("select-item"),e.val($(this).attr("rel")),s.slideUp()}),$(document).click(function(){i.removeClass("active"),s.slideUp()})}),$(".input-text").each(function(){var e,t=$(this).attr("name");switch(t){case"name":e="Please enter correct name";break;case"lastname":e="Please enter correct lastname";break;case"email":e="Please enter correct email";break;default:e="Enter valid value"}$(this).parent().prepend('<div data-error="'+e+'" data-placeholder="'+$(this).attr("placeholder")+'" class="label-text">'+$(this).attr("placeholder")+"</div>"),$(this).removeAttr("placeholder"),0===$(this).val().length&&0===$(this).text().length||$(this).parents(".label").addClass("active")}),$(".form").each(function(){$(this).prepend('<div class="form-error">Error: Something went wrong. Please try to. Bla-bla or enter your name and phone number below. Your Rebate Gift Card will be sent to this number via TEXT message. </div>')}),$(".input-text").focusin(function(){$(this).parents(".label").addClass("active")}),$(".input-text").focusout(function(){0==$(this).val().length&&$(this).parents(".label").removeClass("active")}),$(".input-text").on("keyup",function(e){0==$(this).val().length?$(this).parents(".label").removeClass("active"):$(this).parents(".label").addClass("active")}),$(".copy-btn").click(function(e){e.preventDefault(),$(this).parents(".keywords").find("input").addClass("active");var t=$("<textarea>");$("body").append(t),t.val($(this).parents(".keywords").find("input").val()).select(),document.execCommand("copy"),t.remove(),setTimeout(function(){$(".keywords input").removeClass("active")},1e3)}),$(".copy-textarea").click(function(e){e.preventDefault();var t=$("<textarea>");$("body").append(t),t.val($(this).parent().find("textarea").text()).select(),document.execCommand("copy"),t.remove()});var t=0,i=0;$(".testimonials-item .small").each(function(){i=$(this).text(),t=i.length,t>169&&($(this).text(i.substring(0,169)),$(this).append('<span class="more-hidden">'+i.substring(170,t)+"</span>"),$(this).append('<a href="#more" class="testimonials-more">Show more</a>'))}),$(".testimonials-more").click(function(){$(this).hide(0),$(this).parent().find(".more-hidden").show()}),$('input[name="phone"]').intlTelInput({defaultCountry:"us",initialCountry:"auto",autoPlaceholder:"aggressive",nationalMode:!0,customPlaceholder:function(e,t){return"+"+t.dialCode},geoIpLookup:function(e,t){$.get("https://ipinfo.io",function(){},"jsonp").always(function(t){var i=t&&t.country?t.country:"us";e(i)})},separateDialCode:!0,formatOnDisplay:!0}),$(".check").each(function(){$(this).on("change",function(){var e=$(this).parents("form");$(this).prop("checked")?e.find(".phone").slideDown():e.find(".phone").slideUp()})});var s=window.location.href.split("#")[0];$(".create-steps").slick({dots:!1,infinite:!1,draggable:!1,swipe:!1,arrows:!1,speed:750,slidesToShow:1,centerMode:!0,adaptiveHeight:!0});var a=$(".create-steps .item").length;if($(".progress .title span").text("0%"),$(".progress .line span").css({width:"0%"}),window.location.hash){var n=window.location.hash;$('[data-slick-index="'+n.split("#")[1]+'"]').length>0&&($(".create-steps").slick("slickGoTo",n.split("#")[1],!1),$(".progress .title span").text((100/a*Number(n.split("#")[1])).toFixed()+"%"),$(".progress .line span").css({width:100/a*Number(n.split("#")[1])+"%"}))}$(".prev-step").click(function(e){e.preventDefault(),$(".create-steps").slick("slickPrev")}),$(".next-step").click(function(e){if(e.preventDefault(),$(this).parents(".form")){var t=$(this).parents(".form"),i=0,s=[];if(t.find("[data-validate]").each(function(){s.push("[data-validate]");for(var e=$(this).val(),t=$(this).closest(".label"),a=0;a<s.length;a++)e||(t.addClass("error"),i=1,setTimeout(function(){t.removeClass("error")}.bind(this),2e3),event.preventDefault())}),1!==i){$(".create-steps").slick("slickNext");var a="#funnels-lib",n=$(a).offset().top;$("body,html").animate({scrollTop:n-80},100)}}}),$(".submit").click(function(e){if(e.preventDefault(),$(this).parents(".veryfy-wrap")){var t=$(this).parents(".veryfy-wrap"),i=0,s=[];t.find("input[data-validate]").each(function(){s.push("input[data-validate]");for(var e=$(this).val(),t=$(this).closest(".veryfy-wrap"),a=0;a<s.length;a++)e||(t.addClass("error"),t.find(".title").text("Enter correct PIN:"),i=1,setTimeout(function(){t.removeClass("error"),t.find(".title").text("Enter PIN:")}.bind(this),2e3),event.preventDefault())}),1!==i&&$(this).unbind(e)}if($(this).parents(".form")){var t=$(this).parents(".form"),i=0,s=[];t.find("input[data-validate]").each(function(){s.push("input[data-validate]");for(var e=$(this).val(),a=$(this).closest(".label"),n=0;n<s.length;n++)e||(a.addClass("error"),a.find(".label-text").text(a.find(".label-text").data("error")).addClass("error"),i=1,setTimeout(function(){a.removeClass("error"),a.find(".label-text").text(a.find(".label-text").data("placeholder")).removeClass("error")}.bind(this),2e3),event.preventDefault(),t.find(".form-error").show())}),1!==i&&($(this).unbind(e),t.find(".form-error").hide())}}),$(".create-steps").on("beforeChange",function(e,t,i,n){a=$(".create-steps .item").length,console.log("urlFirst",s),console.log("nextSlide",n),window.location.replace(s+"#"+n),$(".progress .title span").text((100/a*n).toFixed()+"%"),$(".progress .line span").css({width:100/a*n+"%"}),$(".input-text").each(function(){0!==$(this).val().length&&$(this).parents(".label").addClass("active")})});var r=0;$("textarea.input-text").click(function(){0==r&&$(this).text("")}),$("input[type='number']").keyup(function(){$(this).val(this.value.match(/[0-9]*/))});var l=function(e){$(".testimonials-rating.large .star").removeClass("active");for(var t=0;e+1>t;t++)$(".testimonials-rating.large .star").eq(t).toggleClass("active")},o=$(".testimonials-rating.large .star.active").length;$(".testimonials-rating.large .star").hover(function(){l($(this).index())}),$('.create-steps .item:not(".star4")').each(function(){$(this).parents(".slick-slide").addClass("star3")}),$('.create-steps .item:not(".star3thx")').each(function(){$(this).parents(".slick-slide").addClass("star3notthx")}),$(".star3thx").parents(".slick-slide").addClass("star3thx");var c=!1;$(".testimonials-rating.large .star").click(function(){l($(this).index()),o=$(".testimonials-rating.large .star.active").length,o<4&&c===!1?($(".create-steps").slick("slickUnfilter"),$(".create-steps").slick("slickFilter",".star3"),console.log("Filter Slides"),c=!0):($(".create-steps").slick("slickUnfilter"),$(".create-steps").slick("slickFilter",".star3notthx"),console.log("Unfilter Slides"),c=!1)}),$(".testimonials-rating.large .star").on("mouseleave",function(){l(+o-1)}),console.log("starsCount",o)});